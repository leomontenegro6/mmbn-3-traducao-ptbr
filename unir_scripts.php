<?php

// Ler parâmetros passados na linha de comando
$arguments = $argv;
array_shift($arguments);
$arguments = array_map('trim', $arguments);
$version = $arguments[0] ?? 'b';

if (!in_array($version, ['b', 'a'])) {
    echo "Versão inválida. Use 'b' para branco ou 'a' para azul.\n";
    exit(1);
}

// Obtendo lista de offsets para uso posterior, dependendo da versão.
if ($version == 'b') {
    // Versão branca.
    $offsets = [
        "684E9C", "704A00", "705428", "705908", "707C74", "709070", "7090E0",
        "709344", "709C14", "70AAAC", "70B964", "70C800", "70D68C", "70E554",
        "70F438", "7102E4", "710C98", "711400", "7118F8", "7122C0", "71292C",
        "713450", "713928", "714564", "7145AC", "71468C", "714808", "714C68",
        "714DA8", "717244", "71946C", "71B210", "71CF64", "71E3FC", "71F6B0",
        "720C64", "72126C", "72164C", "721854", "721C7C", "72207C", "72447C",
        "724594", "724BE0", "724D3C", "727248", "72912C", "72AF94", "72C88C",
        "72D2A4", "72D2F0", "72E110", "730090", "731EBC", "732878", "7335EC",
        "733A08", "733F84", "7348E0", "7350BC", "735D48", "736908", "737C48",
        "7388C4", "739278", "739B94", "73A760", "73AE0C", "73B234", "73BFDC",
        "73D568", "73EFF8", "73FD50", "73FF10", "740CB4", "743354", "745A9C",
        "746B8C", "747A0C", "748130", "748EA8", "749A58", "74B084", "74C11C",
        "74C2D0", "74C890", "74E798", "7500C0", "75085C", "7512B0", "751724",
        "751FC4", "753394", "75405C", "7544C4", "7549A8", "755314", "756688",
        "757234", "757D38", "758D0C", "75901C", "7590E4", "759998", "759CD8",
        "75A024", "75A1C8", "75A20C", "75A6C8", "75AE0C", "75B3BC", "75BC00",
        "75C4C4", "75CE78", "75D378", "75D618", "75D7D0", "75D9F0", "75DC44",
        "75DDA4", "75DF00", "75E07C", "75E1B4", "75E1F8", "75E294", "75E2D8",
        "75E4B8", "75E62C", "75E8E8", "75EA04", "75EE50", "75F3C0", "75F950",
        "75FEEC", "7604A4", "7608FC", "760A0C", "760BB0", "760CF8", "760E9C",
        "760EF8", "76115C", "761494", "761AAC", "761F68", "7620D4", "762224",
        "762414", "762D60", "763018", "763304", "763740", "7638C8", "763A34",
        "763C10", "763D90", "763F1C", "7640C8", "76429C", "7644EC", "7647B8",
        "7649CC", "765F10", "7670F4", "767F3C", "769AC8", "76AB08", "76BFB8",
        "76D7C4", "76E294", "76F0F8", "77057C", "7710A4", "771860", "772EAC",
        "773690", "773D14", "7744BC", "774CDC", "7755DC", "7759A4", "775F48",
        "77658C", "7777E0", "777E9C", "7784F0", "778AA8", "778D50", "779054",
        "7791FC", "779948", "779BF8", "779CB0", "77A218", "77A450", "77A664",
        "77A9B8", "77AB60", "77ACD4", "77ADF8", "77B048", "77B624", "77B78C",
        "77B860", "77B950", "77BC3C", "77BD68", "77BF70", "77C068", "77C164",
        "77C48C", "77C6A4", "77CB74", "77CD18", "77CD8C", "77CDCC", "77CDFC",
        "77CE44", "77CE90", "77CEDC", "77CF78", "77D174", "77D31C", "77D77C",
        "77DA5C", "77DED8", "77E048", "77E214", "77E5F8", "77E750", "77EA28",
        "77EBC0", "77EE88", "77F698", "77F794", "77F918", "77FB14", "77FC08",
        "77FCD4", "77FEA4", "77FFB8", "7804BC", "7809D4", "780A70", "780EAC",
        "7810B8", "781270", "7815B4", "78175C", "7817CC", "781CF0", "7822E8",
        "7826CC", "782E94", "783114", "783894", "783A5C", "78418C", "78464C",
        "784A28", "784DD8", "784FC4", "7854B8", "7859FC", "785BB0", "785D8C",
        "785F70", "7860D4", "786378", "786794", "786C40", "786E08", "78700C",
        "78753C", "787774", "787BF0", "787E4C", "78801C", "78873C", "7889D8",
        "788D98", "789908", "789CD8", "78A03C", "78A280", "78A718", "78AA88",
        "78AD40", "78AF18", "78B0F4", "78B2E0", "78B4BC", "78BA14", "78BB30",
        "78C0D8", "78C4F8", "78C608", "78CB10", "78D30C", "78D854", "78DFA4",
        "78E0D0", "78E770", "78F08C", "78F8AC", "78FF10", "790440", "7908F0",
        "790E64", "7911F8", "79185C", "791D64", "791DFC", "7926AC", "792870",
        "792E80", "793524", "793620", "793938", "794088", "7942A0", "794A04",
        "794EBC", "79554C", "795780", "7959CC", "795B9C", "795E98", "7962EC",
        "79637C", "7963E0", "7964EC", "7965C4", "796CE8", "796D38", "7970A0",
        "797124", "7973C8", "79745C", "797730", "797CA8", "798344", "798694",
        "798C18", "799140", "79974C", "7998F8", "799AC4", "79A1D8", "79A57C",
        "79AA30", "79AB50", "79AC3C", "79AED4", "79B0C8", "79B318", "79B748",
        "79B92C", "79C22C", "79C34C", "79C454", "79C56C", "79C688", "79C888",
        "79CA14", "79CBA0", "79CE2C", "79CFD0", "79D200", "79D744", "79DFE0",
        "79E200", "79E448", "79E860", "79E9B0", "79F070", "79FAA0", "7A03AC",
        "7A0A34", "7A0FBC", "7A1154", "7A13E4", "7A18A0", "7A1BD0", "7A1F24",
        "7A24F4", "7A29D4", "7A2AB4", "7A2CD4", "7A2E40", "7A3860", "7A3B80",
        "7A4234", "7A435C", "7A4A38", "7A503C", "7A5184", "7A5344", "7A578C",
        "7A5888", "7A5AE8", "7A5E04", "7A6864", "7A6CA4", "7A6F10", "7A76A8",
        "7A79FC", "7A8610", "7A8C0C", "7A8DA4", "7A94D4", "7A9620", "7A9F1C",
        "7AA658", "7AA958", "7AADB4", "7AAE6C", "7AB224", "7AB430", "7AB548",
        "7AB65C", "7AB8D4", "7AB910", "7ABABC", "7ABBDC", "7AC13C", "7AC1DC",
        "7AC45C", "7AC4B4", "7AC940", "7ACA8C", "7ACB0C", "7ACBC4", "7ACE90",
        "7ACF0C", "7AD060", "7AD368", "7AD9F0", "7ADBC0", "7AE308", "7AE820",
        "7AE9DC", "7AF544", "7AFD2C", "7B01F0", "7B26AC", "7B2E78", "7B36DC",
        "7B3934", "7B3AE8", "7B3D28", "7B3E48", "7B4288", "7B47AC", "7B4A9C",
        "7B5028", "7CB804", "7E7A28", "7E8500", "7E8FBC", "7E93A8", "7EA6D8",
        "7EB2C0", "7EB3B0", "7EB5AC", "7EBD84", "7EBEB8", "7ECA10", "7EE518",
        "7EE6EC", "7EE8CC", "7EEBA8", "7EED7C", "7EEF5C", "7EF130", "7EF2FC",
        "7EF4D0", "7EF6A4", "7EF878", "7F0F50", "7F0FC0", "7F11E0", "7F2B9C",
        "7F2E00", "7F3F38", "7F4148", "7F5370", "7F5558", "7F6448", "7F6608",
        "7F7390", "7F7544", "7F7FB8", "7F80D0", "7F9A08", "7F9A2C", "7F9D00",
        "7FB010",
    ];
} else {
    // Versão azul.
    $offsets = [
        "684F9C", "7043EC", "704E14", "7052F4", "707660", "708A5C", "708ACC",
        "708D30", "709600", "70A498", "70B350", "70C1EC", "70D078", "70DF40",
        "70EE24", "70FCD0", "710684", "710DEC", "7112E4", "711CAC", "712318",
        "712E3C", "713314", "713F50", "713F98", "714078", "7141F4", "714654",
        "714794", "716C30", "718E58", "71ABFC", "71C950", "71DDE8", "71F09C",
        "720650", "720C58", "721038", "721240", "721668", "721A68", "723E68",
        "723F80", "7245CC", "724728", "726C34", "728B18", "72A980", "72C278",
        "72CC90", "72CCDC", "72DAFC", "72FA7C", "7318A8", "732264", "732FD8",
        "7333F4", "733970", "7342CC", "734AA8", "735734", "7362F4", "737634",
        "7382B0", "738C64", "739580", "73A14C", "73A7F8", "73AC20", "73B9C8",
        "73CF54", "73E9E4", "73F73C", "73F8FC", "7406A0", "742D40", "745488",
        "746578", "7473F8", "747B1C", "748894", "749444", "74AA70", "74BB08",
        "74BCBC", "74C27C", "74E184", "74FAAC", "750248", "750C9C", "751110",
        "7519B0", "752D80", "753A48", "753EB0", "754394", "754D00", "756074",
        "756C20", "757724", "7586F8", "758A08", "758AD0", "759384", "7596C4",
        "759A10", "759BB4", "759BF8", "75A0B4", "75A7F8", "75ADA8", "75B5EC",
        "75BEB0", "75C864", "75CD64", "75D004", "75D1BC", "75D3DC", "75D630",
        "75D790", "75D8EC", "75DA68", "75DBA0", "75DBE4", "75DC80", "75DCC4",
        "75DEA4", "75E018", "75E2D4", "75E3F0", "75E83C", "75EDAC", "75F33C",
        "75F8D8", "75FE90", "7602E8", "7603F8", "76059C", "7606E4", "760888",
        "7608E4", "760B48", "760E80", "761498", "761954", "761AC0", "761C10",
        "761E00", "76274C", "762A04", "762CF0", "76312C", "7632B4", "763420",
        "7635FC", "76377C", "763908", "763AB4", "763C88", "763ED8", "7641A4",
        "7643B8", "7658FC", "766AE0", "767928", "7694B4", "76A4F4", "76B9A4",
        "76D1B0", "76DC80", "76EAE4", "76FF68", "770A90", "77124C", "772898",
        "77307C", "773700", "773EA8", "7746C8", "774FC8", "775390", "775934",
        "775F78", "7771CC", "777888", "777EDC", "778494", "77873C", "778A40",
        "778BE8", "779334", "7795E4", "77969C", "779C04", "779E3C", "77A050",
        "77A3A4", "77A54C", "77A6C0", "77A7E4", "77AA34", "77B010", "77B178",
        "77B24C", "77B33C", "77B628", "77B754", "77B95C", "77BA54", "77BB50",
        "77BE78", "77C090", "77C560", "77C704", "77C778", "77C7B8", "77C7E8",
        "77C830", "77C87C", "77C8C8", "77C964", "77CB60", "77CD08", "77D168",
        "77D448", "77D8C4", "77DA34", "77DC00", "77DFE4", "77E13C", "77E414",
        "77E5AC", "77E874", "77F084", "77F180", "77F304", "77F500", "77F5F4",
        "77F6C0", "77F890", "77F9A4", "77FEA8", "7803C0", "78045C", "780898",
        "780AA4", "780C5C", "780FA0", "781148", "7811B8", "7816DC", "781CD4",
        "7820B8", "782880", "782B00", "783280", "783448", "783B78", "784038",
        "784414", "7847C4", "7849B0", "784EA4", "7853E8", "78559C", "785778",
        "78595C", "785AC0", "785D64", "786180", "78662C", "7867F4", "7869F8",
        "786F28", "787160", "7875DC", "787838", "787A08", "788128", "7883C4",
        "788784", "7892F4", "7896C4", "789A28", "789C6C", "78A104", "78A474",
        "78A72C", "78A904", "78AAE0", "78ACCC", "78AEA8", "78B400", "78B51C",
        "78BAC4", "78BEE4", "78BFF4", "78C4FC", "78CCF8", "78D240", "78D990",
        "78DABC", "78E15C", "78EA78", "78F298", "78F8FC", "78FE2C", "7902DC",
        "790850", "790BE4", "791248", "791750", "7917E8", "792098", "79225C",
        "79286C", "792F10", "79300C", "793324", "793A74", "793C8C", "7943F0",
        "7948A8", "794F38", "79516C", "7953B8", "795588", "795884", "795CD8",
        "795D68", "795DCC", "795ED8", "795FB0", "7966D4", "796724", "796A8C",
        "796B10", "796DB4", "796E48", "79711C", "797694", "797D30", "798080",
        "798604", "798B2C", "799138", "7992E4", "7994B0", "799BC4", "799F68",
        "79A41C", "79A53C", "79A628", "79A8C0", "79AAB4", "79AD04", "79B134",
        "79B318", "79BC18", "79BD38", "79BE40", "79BF58", "79C074", "79C274",
        "79C400", "79C58C", "79C818", "79C9BC", "79CBEC", "79D130", "79D9CC",
        "79DBEC", "79DE34", "79E24C", "79E39C", "79EA5C", "79F48C", "79FD98",
        "7A0420", "7A09A8", "7A0B40", "7A0DD0", "7A128C", "7A15BC", "7A1910",
        "7A1EE0", "7A23C0", "7A24A0", "7A26C0", "7A282C", "7A324C", "7A356C",
        "7A3C20", "7A3D48", "7A4424", "7A4A28", "7A4B70", "7A4D30", "7A5178",
        "7A5274", "7A54D4", "7A57F0", "7A6250", "7A6690", "7A68FC", "7A7094",
        "7A73E8", "7A7FFC", "7A85F8", "7A8790", "7A8EC0", "7A900C", "7A9908",
        "7AA044", "7AA344", "7AA7A0", "7AA858", "7AAC10", "7AAE1C", "7AAF34",
        "7AB048", "7AB2C0", "7AB2FC", "7AB4A8", "7AB5C8", "7ABB28", "7ABBC8",
        "7ABE48", "7ABEA0", "7AC32C", "7AC478", "7AC4F8", "7AC5B0", "7AC87C",
        "7AC8F8", "7ACA4C", "7ACD54", "7AD3DC", "7AD5AC", "7ADCF4", "7AE20C",
        "7AE3C8", "7AEF30", "7AF718", "7AFBDC", "7B2098", "7B2864", "7B30C8",
        "7B3320", "7B34D4", "7B3714", "7B3834", "7B3C74", "7B4198", "7B4488",
        "7B4A14", "7CB3F0", "7E7618", "7E80F0", "7E8BAC", "7E8F98", "7EA2C8",
        "7EAEB0", "7EAFA0", "7EB19C", "7EB974", "7EBAA8", "7EC600", "7EE108",
        "7EE2DC", "7EE4BC", "7EE798", "7EE96C", "7EEB4C", "7EED20", "7EEEEC",
        "7EF0C0", "7EF294", "7EF468", "7F0B40", "7F0BB0", "7F0DD0", "7F278C",
        "7F29F0", "7F3B28", "7F3D38", "7F4F60", "7F5148", "7F6038", "7F61F8",
        "7F6F80", "7F7134", "7F7BA8", "7F7CC0", "7F95F8", "7F961C", "7F98F0",
        "7FAC00",
    ];
}

// Iterando pelos offsets e abrindo os arquivos correspondentes.
$contents = '';
foreach ($offsets as $i => $offset) {
    $number = str_pad(($i + 1), 3, '0', STR_PAD_LEFT);
    $file_name = 'Scripts/Editados/GBA/' . $number . '.tpl';
    if (file_exists($file_name)) {
        $contents .= "@archive $offset\n";
        $contents .= file_get_contents($file_name);
    } else {
        echo "Arquivo não encontrado: $file_name\n";
    }
}

// Salvando o conteúdo combinado em um novo arquivo.
$output_file_name = 'Scripts/script-' . ($version == 'b' ? 'white' : 'blue') . '.tpl';
file_put_contents($output_file_name, $contents);

echo "Arquivo combinado salvo como: $output_file_name\n";